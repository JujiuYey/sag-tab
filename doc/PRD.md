# sag-tab 产品需求文档 (PRD)

## 1. 产品概述

### 1.1 产品名称
sag-tab

### 1.2 产品定位
一款极简风格的浏览器新标签页扩展插件，帮助用户快速访问常用网站，支持书签管理和分组功能。

### 1.3 目标用户
追求简洁高效的浏览器用户，需要快速访问常用网站并进行个性化管理。

### 1.4 目标浏览器
- Google Chrome
- Microsoft Edge

---

## 2. 功能需求

### 2.1 书签快捷方式

#### 2.1.1 书签展示
- 每个书签显示：图标 + 名称
- 图标来源：
  - 自动抓取网站 favicon
  - 支持用户上传自定义图标
- 布局：自适应网格布局，响应式展示

#### 2.1.2 书签操作
- **添加书签**：点击添加按钮，填写名称、URL、选择/上传图标
- **编辑书签**：hover 时显示编辑按钮，可修改名称、URL、图标
- **删除书签**：hover 时显示删除按钮，需二次确认
- **拖拽排序**：支持拖拽调整书签位置

#### 2.1.3 书签字段
| 字段 | 类型 | 必填 | 说明 |
|------|------|------|------|
| id | string | 是 | 唯一标识 |
| name | string | 是 | 书签名称 |
| url | string | 是 | 网站地址 |
| icon | string | 否 | 图标URL或base64，为空时自动抓取favicon |
| order | number | 是 | 排序序号 |
| groupId | string | 否 | 所属分组ID，为空表示在根目录 |

---

### 2.2 文件夹分组

#### 2.2.1 分组展示
- 分组以文件夹形式在网格中展示
- 与书签混合排列，支持拖拽排序
- 分组数量无限制

#### 2.2.2 分组交互
- **点击分组**：弹出浮层展示分组内的书签
- **浮层特性**：
  - 居中弹出
  - 点击外部区域关闭
  - 内部书签同样支持拖拽排序
- **不支持嵌套**：分组内只能放书签，不能放子分组

#### 2.2.3 分组操作
- **添加分组**：点击添加按钮，填写分组名称、选择图标
- **编辑分组**：hover 时显示编辑按钮
- **删除分组**：hover 时显示删除按钮，需二次确认（分组内书签一并删除或移出）

#### 2.2.4 分组字段
| 字段 | 类型 | 必填 | 说明 |
|------|------|------|------|
| id | string | 是 | 唯一标识 |
| name | string | 是 | 分组名称 |
| icon | string | 否 | 分组图标 |
| order | number | 是 | 排序序号 |

---

### 2.3 搜索框

#### 2.3.1 位置与样式
- 位置：页面顶部水平居中
- 样式：极简风格输入框

#### 2.3.2 搜索引擎
- 支持的搜索引擎：
  - Google
  - 百度
- 切换方式：搜索框旁边的下拉选择或图标切换
- 不支持用户自定义搜索引擎

#### 2.3.3 搜索交互
- 输入关键词后按 Enter 执行搜索
- 在新标签页打开搜索结果

---

### 2.4 数据管理

#### 2.4.1 本地存储
- 使用浏览器扩展的 storage API 存储数据
- 数据包括：书签列表、分组列表、用户设置

#### 2.4.2 导出功能
- 导出格式：JSON 文件
- 导出内容：所有书签、分组、用户设置
- 文件命名：`sag-tab-backup-{日期}.json`

#### 2.4.3 导入功能
- 支持导入 sag-tab 导出的 JSON 文件
- 导入前提示用户：覆盖现有数据 / 合并数据
- 数据校验：检查 JSON 格式是否合法

---

### 2.5 主题设置

#### 2.5.1 主题模式
- 浅色模式（Light）
- 深色模式（Dark）
- 支持手动切换

#### 2.5.2 背景设置
- 纯色背景：预设 7 种颜色供选择
- 自定义图片背景：
  - 支持上传本地图片（JPG、PNG、GIF、WebP）
  - 图片自动压缩（最大 1920x1080，目标 500KB）
  - 展示模式：覆盖、适应、填充、平铺、居中
  - 遮罩层：可调节透明度（0-80%）
  - 背景模糊：可调节模糊程度（0-20px）

---

## 3. 界面设计

### 3.1 整体布局

```
+--------------------------------------------------+
|                    [搜索框]                        |
|              Google v  [_______________] 🔍        |
+--------------------------------------------------+
|                                                    |
|    [书签1]  [书签2]  [文件夹1]  [书签3]  [+添加]    |
|                                                    |
|    [书签4]  [书签5]  [书签6]    [书签7]             |
|                                                    |
+--------------------------------------------------+
|                              [设置] [主题切换]      |
+--------------------------------------------------+
```

### 3.2 书签卡片
- 尺寸：适中的正方形或圆角矩形
- 内容：居中图标 + 下方名称
- 状态：
  - 默认：仅显示图标和名称
  - Hover：显示编辑/删除按钮，轻微放大或阴影效果

### 3.3 文件夹浮层
```
+----------------------------------+
|  [文件夹名称]              [关闭] |
+----------------------------------+
|                                   |
|  [书签1]  [书签2]  [书签3]        |
|                                   |
|  [书签4]  [+添加]                 |
|                                   |
+----------------------------------+
```

### 3.4 设置面板
- 入口：页面角落的设置图标
- 内容：
  - 主题切换
  - 背景设置
  - 数据导入/导出

---

## 4. 技术规格

### 4.1 技术栈建议
- 框架：React / Vue 3
- 构建工具：Vite
- 样式：Tailwind CSS / CSS Modules
- 状态管理：Zustand / Pinia
- 拖拽：dnd-kit / vuedraggable

### 4.2 浏览器扩展 API
- `chrome.storage.local` - 本地数据存储
- `chrome.storage.sync` - 可选的同步存储（限制较多）
- Manifest V3 规范

### 4.3 数据结构

```typescript
// 书签
interface Bookmark {
  id: string;
  name: string;
  url: string;
  icon?: string;
  order: number;
  groupId?: string;
}

// 分组
interface Group {
  id: string;
  name: string;
  icon?: string;
  order: number;
}

// 图片展示模式
type ImageDisplayMode = 'cover' | 'contain' | 'fill' | 'tile' | 'center';

// 图片配置
interface ImageConfig {
  displayMode: ImageDisplayMode;
  overlay: boolean;
  overlayColor: string;
  overlayOpacity: number;
  blur: number;
}

// 用户设置
interface Settings {
  theme: 'light' | 'dark';
  background: {
    type: 'solid' | 'image';
    value: string;
    imageConfig?: ImageConfig;
  };
  searchEngine: 'google' | 'baidu';
}

// 完整数据
interface AppData {
  bookmarks: Bookmark[];
  groups: Group[];
  settings: Settings;
  version: string;
}
```

---

## 5. 非功能需求

### 5.1 性能
- 新标签页打开时间 < 500ms
- 拖拽操作流畅，无卡顿

### 5.2 兼容性
- Chrome 88+
- Edge 88+

### 5.3 安全性
- 不收集用户数据
- 所有数据仅存储在本地
- 图标上传需限制文件大小和格式

---

## 6. 版本规划

### v1.0 MVP
- [x] 书签的增删改查
- [x] 文件夹分组（浮层展示）
- [x] 拖拽排序
- [x] 搜索框（Google/百度）
- [x] 深色/浅色主题
- [x] 数据导入/导出

### v1.1 优化
- [x] 自定义背景图片上传
- [ ] 更多预设主题
- [ ] 键盘快捷键支持

### v2.0 未来
- [ ] 云同步（可选）
- [ ] 更多搜索引擎
- [ ] 浏览器书签导入

---

## 7. 附录

### 7.1 参考产品
- WeTab
- Infinity New Tab
- Momentum

### 7.2 设计原则
- 极简：只保留必要功能，拒绝臃肿
- 高效：快速访问，减少点击
- 美观：简洁大方，视觉舒适
